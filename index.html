<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Laika 0.18.2 + Helium Theme" />
    <title>featran</title>
    
    
      <meta name="description" content="site"/>
    
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.207/distr/fira_code.css">
    
    <link rel="stylesheet" type="text/css" href="helium/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="helium/laika-helium.css" />
    <script src="helium/laika-helium.js"></script>
    
    
    <script> /* for avoiding page load transitions */ </script>
  </head>

  <body>

    <header id="top-bar">

      <div class="row">
        <a id="nav-icon">
          <i class="icofont-laika" title="Navigation">&#xefa2;</i>
        </a>
        
      </div>
  
      <a class="icon-link" href="#"><i class="icofont-laika" title="Home">&#xef47;</i></a>
      
      <span class="row links"><a class="icon-link svg-link" href="api/index.html"><span title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a><a class="icon-link svg-link" href="https://github.com/spotify/featran"><span title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a></span>
      
    </header>

    <nav id="sidebar">

      <div class="row">
        <a class="icon-link svg-link" href="api/index.html"><span title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a><a class="icon-link svg-link" href="https://github.com/spotify/featran"><span title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
      </div>
      
      <ul class="nav-list">
      </ul>
      
    </nav>

    <div id="container">

      <nav id="page-nav">
        <p class="header"><a href="#">featran</a></p>
        
        <ul class="nav-list">
          <li class="level1"><a href="#introduction">Introduction</a></li>
          <li class="level1"><a href="#presentations">Presentations</a></li>
          <li class="level1"><a href="#artifacts">Artifacts</a></li>
          <li class="level1"><a href="#license">License</a></li>
        </ul>
        
        <p class="footer"></p>
      </nav>

      <main class="content">

        <h1 id="featran" class="title">featran</h1>
        <p><a href="https://github.com/spotify/featran/actions?query=workflow%3Aci"><img src="https://img.shields.io/github/workflow/status/spotify/featran/ci" alt="Build Status"></a>
        <a href="https://codecov.io/github/spotify/featran?branch=master"><img src="https://codecov.io/github/spotify/featran/coverage.svg?branch=master" alt="codecov.io"></a>
        <a href="https://maven-badges.herokuapp.com/maven-central/com.spotify/featran-core_2.12"><img src="https://img.shields.io/maven-central/v/com.spotify/featran-core_2.12.svg" alt="Maven Central"></a>
        <a href="https://spotify.github.io/featran/api/com/spotify/featran/index.html"><img src="https://img.shields.io/badge/scaladoc-latest-blue.svg" alt="Scaladoc"></a>
        <a href="https://scala-steward.org"><img src="https://img.shields.io/badge/Scala_Steward-helping-brightgreen.svg?style=flat&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAMAAAARSr4IAAAAVFBMVEUAAACHjojlOy5NWlrKzcYRKjGFjIbp293YycuLa3pYY2LSqql4f3pCUFTgSjNodYRmcXUsPD/NTTbjRS+2jomhgnzNc223cGvZS0HaSD0XLjbaSjElhIr+AAAAAXRSTlMAQObYZgAAAHlJREFUCNdNyosOwyAIhWHAQS1Vt7a77/3fcxxdmv0xwmckutAR1nkm4ggbyEcg/wWmlGLDAA3oL50xi6fk5ffZ3E2E3QfZDCcCN2YtbEWZt+Drc6u6rlqv7Uk0LdKqqr5rk2UCRXOk0vmQKGfc94nOJyQjouF9H/wCc9gECEYfONoAAAAASUVORK5CYII=" alt="Scala Steward badge"></a></p>
        <p>Featran, also known as Featran77 or F77 (get it?), is a Scala library for feature transformation. It aims to simplify the time consuming task of feature engineering in data science and machine learning processes. It supports various collection types for feature extraction and output formats for feature representation.</p>
        
        <h1 id="introduction" class="section"><a class="anchor-link left" href="#introduction"><i class="icofont-laika">&#xef71;</i></a>Introduction</h1>
        <p>Most feature transformation logic requires two steps, one global aggregation to summarize data followed by one element-wise mapping to transform them. For example:</p>
        <ul>
          <li>Min-Max Scaler</li>
        </ul>
        <ul>
          <li>Aggregation: global min &amp; max</li>
        </ul>
        <ul>
          <li>Mapping: scale each value to <code>[min, max]</code></li>
          <li>One-Hot Encoder</li>
        </ul>
        <ul>
          <li>Aggregation: distinct labels</li>
        </ul>
        <ul>
          <li>Mapping: convert each label to a binary vector</li>
        </ul>
        <p>We can implement this in a naive way using <code>reduce</code> and <code>map</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Point</span><span>(</span><span class="identifier">score</span><span>: </span><span class="type-name">Double</span><span>, </span><span class="identifier">label</span><span>: </span><span class="type-name">String</span><span>)
</span><span class="keyword">val</span><span> </span><span class="identifier">data</span><span> = </span><span class="type-name">Seq</span><span>(</span><span class="type-name">Point</span><span>(</span><span class="number-literal">1.0</span><span>, </span><span class="string-literal">&quot;a&quot;</span><span>), </span><span class="type-name">Point</span><span>(</span><span class="number-literal">2.0</span><span>, </span><span class="string-literal">&quot;b&quot;</span><span>), </span><span class="type-name">Point</span><span>(</span><span class="number-literal">3.0</span><span>, </span><span class="string-literal">&quot;c&quot;</span><span>))

</span><span class="keyword">val</span><span> </span><span class="identifier">a</span><span> = </span><span class="identifier">data</span><span>
  .</span><span class="identifier">map</span><span>(</span><span class="identifier">p</span><span> =&gt; (</span><span class="identifier">p</span><span>.</span><span class="identifier">score</span><span>, </span><span class="identifier">p</span><span>.</span><span class="identifier">score</span><span>, </span><span class="type-name">Set</span><span>(</span><span class="identifier">p</span><span>.</span><span class="identifier">label</span><span>)))
  .</span><span class="identifier">reduce</span><span>((</span><span class="identifier">x</span><span>, </span><span class="identifier">y</span><span>) =&gt; (</span><span class="identifier">math</span><span>.</span><span class="identifier">min</span><span>(</span><span class="identifier">x</span><span class="number-literal">._1</span><span>, </span><span class="identifier">y</span><span class="number-literal">._1</span><span>), </span><span class="identifier">math</span><span>.</span><span class="identifier">max</span><span>(</span><span class="identifier">x</span><span class="number-literal">._2</span><span>, </span><span class="identifier">y</span><span class="number-literal">._2</span><span>), </span><span class="identifier">x</span><span class="number-literal">._3</span><span> ++ </span><span class="identifier">y</span><span class="number-literal">._3</span><span>))

</span><span class="keyword">val</span><span> </span><span class="identifier">features</span><span> = </span><span class="identifier">data</span><span>.</span><span class="identifier">map</span><span> { </span><span class="identifier">p</span><span> =&gt;
  (</span><span class="identifier">p</span><span>.</span><span class="identifier">score</span><span> - </span><span class="identifier">a</span><span class="number-literal">._1</span><span>) / (</span><span class="identifier">a</span><span class="number-literal">._2</span><span> - </span><span class="identifier">a</span><span class="number-literal">._1</span><span>) :: </span><span class="identifier">a</span><span class="number-literal">._3</span><span>.</span><span class="identifier">toList</span><span>.</span><span class="identifier">sorted</span><span>.</span><span class="identifier">map</span><span>(</span><span class="identifier">s</span><span> =&gt; </span><span class="keyword">if</span><span> (</span><span class="identifier">s</span><span> == </span><span class="identifier">p</span><span>.</span><span class="identifier">label</span><span>) </span><span class="number-literal">1.0</span><span> </span><span class="keyword">else</span><span> </span><span class="number-literal">0.0</span><span>)
}</span></code></pre>
        <p>But this is unmanageable for complex feature sets. The above logic can be easily expressed in Featran.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">com</span><span>.</span><span class="identifier">spotify</span><span>.</span><span class="identifier">featran</span><span>.</span><span class="identifier">_</span><span>
</span><span class="keyword">import</span><span> </span><span class="identifier">com</span><span>.</span><span class="identifier">spotify</span><span>.</span><span class="identifier">featran</span><span>.</span><span class="identifier">transformers</span><span>.</span><span class="identifier">_</span><span>

</span><span class="keyword">val</span><span> </span><span class="identifier">fs</span><span> = </span><span class="type-name">FeatureSpec</span><span>.</span><span class="identifier">of</span><span>[</span><span class="type-name">Point</span><span>]
  .</span><span class="identifier">required</span><span>(</span><span class="identifier">_</span><span>.</span><span class="identifier">score</span><span>)(</span><span class="type-name">MinMaxScaler</span><span>(</span><span class="string-literal">&quot;min-max&quot;</span><span>))
  .</span><span class="identifier">required</span><span>(</span><span class="identifier">_</span><span>.</span><span class="identifier">label</span><span>)(</span><span class="type-name">OneHotEncoder</span><span>(</span><span class="string-literal">&quot;one-hot&quot;</span><span>))

</span><span class="keyword">val</span><span> </span><span class="identifier">fe</span><span> = </span><span class="identifier">fs</span><span>.</span><span class="identifier">extract</span><span>(</span><span class="identifier">data</span><span>)
</span><span class="keyword">val</span><span> </span><span class="identifier">names</span><span> = </span><span class="identifier">fe</span><span>.</span><span class="identifier">featureNames</span><span>
</span><span class="keyword">val</span><span> </span><span class="identifier">features</span><span> = </span><span class="identifier">fe</span><span>.</span><span class="identifier">featureValues</span><span>[</span><span class="type-name">Seq</span><span>[</span><span class="type-name">Double</span><span>]]</span></code></pre>
        <p>Featran also supports these additional features.</p>
        <ul>
          <li>Extract from Scala collections, <a href="http://flink.apache.org/">Flink</a> <code>DataSet</code>s, <a href="https://github.com/twitter/scalding">Scalding</a> <code>TypedPipe</code>s, <a href="https://github.com/spotify/scio">Scio</a> <code>SCollection</code>s and <a href="https://spark.apache.org/">Spark</a> <code>RDD</code>s</li>
          <li>Output as Scala collections, <a href="https://github.com/scalanlp/breeze">Breeze</a> dense and sparse vectors,  <a href="https://www.tensorflow.org/">TensorFlow</a> <code>Example</code> Protobuf, <a href="https://github.com/dmlc/xgboost">XGBoost</a> <code>LabeledPoint</code> and <a href="http://www.numpy.org/">NumPy</a> <code>.npy</code> file</li>
          <li>Import aggregation from a previous extraction for training, validation and test sets</li>
          <li>Compose feature specifications and separate outputs</li>
        </ul>
        <p>See <a href="https://spotify.github.io/featran/examples/Examples.scala.html">Examples</a> (<a href="https://github.com/spotify/featran/blob/master/examples/src/main/scala/Examples.scala">source</a>) for detailed examples. See <a href="https://spotify.github.io/featran/api/index.html#com.spotify.featran.transformers.package">transformers</a> package for a complete list of available feature transformers.</p>
        <p>See <a href="https://spotify.github.io/featran">ScalaDocs</a> for current API documentation.</p>
        
        <h1 id="presentations" class="section"><a class="anchor-link left" href="#presentations"><i class="icofont-laika">&#xef71;</i></a>Presentations</h1>
        <ul>
          <li><a href="https://www.lyh.me/slides/featran.html">Featran - Type safe and generic feature transformation in Scala</a> - NABD Conf Palo Alto 2017 talk</li>
        </ul>
        
        <h1 id="artifacts" class="section"><a class="anchor-link left" href="#artifacts"><i class="icofont-laika">&#xef71;</i></a>Artifacts</h1>
        <p>Feature includes the following artifacts:</p>
        <ul>
          <li><code>featran-core</code> - core library, support for extraction from Scala collections and output as Scala collections, Breeze dense and sparse vectors</li>
          <li><code>featran-java</code> - Java interface, see <a href="https://github.com/spotify/featran/blob/master/java/src/test/java/com/spotify/featran/java/examples/JavaExample.java">JavaExample.java</a></li>
          <li><code>featran-flink</code> - support for extraction from Flink <code>DataSet</code></li>
          <li><code>featran-scalding</code> - support for extraction from Scalding <code>TypedPipe</code></li>
          <li><code>featran-scio</code> - support for extraction from Scio <code>SCollection</code></li>
          <li><code>featran-spark</code> - support for extraction from Spark <code>RDD</code></li>
          <li><code>featran-tensorflow</code> - support for output as TensorFlow <code>Example</code> Protobuf</li>
          <li><code>featran-xgboost</code> - support for output as XGBoost <code>LabeledPoint</code></li>
          <li><code>featran-numpy</code> - support for output as NumPy <code>.npy</code> file</li>
        </ul>
        
        <h1 id="license" class="section"><a class="anchor-link left" href="#license"><i class="icofont-laika">&#xef71;</i></a>License</h1>
        <p>Copyright 2016-2017 Spotify AB.</p>
        <p>Licensed under the Apache License, Version 2.0: <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

      </main>

    </div>

  </body>
</html>